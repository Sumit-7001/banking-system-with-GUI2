{% extends "base.html" %}
{% block title %}Transactions{% endblock %}

{% block content %}
<section class="card">
    <div class="card-header">
        <h3>View Last 5 Transactions</h3>
    </div>
    <form action="{{ url_for('show_transactions') }}" method="POST" class="account-form">
        <div class="form-group">
            <label for="acc_no">Account Number:</label>
            <input type="text" id="acc_no" name="acc_no" required 
                   value="{{ acc_no_checked if acc_no_checked else '' }}">
        </div>
        <div class="form-group">
            <button type="submit" class="cta-button">Show Transactions</button>
        </div>
    </form>
</section>

{% if transactions %}
<section class="card transactions">
    <div class="card-header">
        <h3>Transaction History for {{ acc_no_checked }}</h3>
        
        <a href="{{ url_for('print_transactions', acc_no=acc_no_checked) }}" 
           class="cta-button" 
           target="_blank">
           <i class="bi bi-printer-fill"></i> Print PDF
        </a>
    </div>

    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Amount</th>
                <th>New Balance</th>
            </tr>
        </thead>
        <tbody>
            {% for tx in transactions %}
            <tr>
                <td>{{ tx.date }}</td>
                <td>
                    <span class="txn-type {{ 'credit' if tx.type == 'Deposit' else 'debit' }}">
                        {{ tx.type }}
                    </span>
                </td>
                
                <td style="color: {% if tx.type == 'Deposit' %}#155724{% else %}#721c24{% endif %}; font-weight: 600;">
                    {% if tx.type == 'Deposit' %}+{% else %}-{% endif %} {{ tx.amount }}
                </td>
                <td>{{ tx.balance }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
{% endif %}
{% endblock %}