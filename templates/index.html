{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}

<div class="dashboard-grid">
    
    <!-- 
    
        <div class="card-header">
            <h3>Your Current Balance</h3>
        </div>
        <div class="balance-details">
            <span class="currency">₹</span>
            <span class="amount">12,540.50</span>
            <div class="account-info">
                <span class="label">Account Holder:</span>
                <span class="value">Sumit Kumar Sahoo</span>
            </div>
            <div class="account-info">
                <span class="label">Account Number:</span>
                <span class="value">**** **** 0696</span>
            </div>
        </div>
    </section> -->
    <section class="card balance-card">
        <div class="card-header">
            <h3>Your Session Transactions</h3>
        </div>
        <div class="balance-details">
            <span class="currency">₹</span>
            <span class="amount">{{ "%.2f"|format(session.get('session_transaction_total', 0.0)) }}</span>
            
            <div class="account-info">
                <span class="label">Admin Logged In:</span>
                <span class="value">{{ session['full_name'] }}</span>
            </div>
            <div class="account-info">
                <span class="label">Status:</span>
                <span class="value">Online</span>
            </div>
        </div>
    </section>

    <section class="card quick-actions">
        <div class="card-header">
            <h3>Quick Actions</h3>
        </div>
        <div class="action-buttons">
            <a href="{{ url_for('deposit') }}" class="action-btn deposit">
                <span class="icon"><i class="bi bi-box-arrow-in-down"></i></span>
                <span>Deposit</span>
            </a>
            <a href="{{ url_for('withdraw') }}" class="action-btn withdraw">
                <span class="icon"><i class="bi bi-box-arrow-up"></i></span>
                <span>Withdraw</span>
            </a>
            <a href="#" class="action-btn transfer">
                <span class="icon"><i class="bi bi-arrow-left-right"></i></span>
                <span>Transfer</span>
            </a>
        </div>
    </section>
    
    <section class="card transactions">
            <div class="card-header">
                <h3>Recent Admin Activities ({{ session['username'] }})</h3>
                <a href="#">View all</a>
            </div>
            
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Action</th>
                        <th>Account No.</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {% for activity in recent_activities %}
                    <tr>
                        <td>{{ activity.date.split(' ')[0] }}<br><small>{{ activity.date.split(' ')[1] }}</small></td>
                        <td>
                            <span class="txn-type {{ 'credit' if activity.action == 'Deposit' or activity.action == 'New Account' else 'debit' }}">
                                {{ activity.action }}
                            </span>
                        </td>
                        <td>{{ activity.account_no }}</td>
                        <td style="color: #34d399; font-weight: 600;">
                            {% if activity.action == 'Withdraw' %}-{% else %}+{% endif %} {{ "%.2f"|format(activity.amount|float) }}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 20px; color: #94a3b8;">
                            No activities found for this admin.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            </section>

</div>
{% endblock %}